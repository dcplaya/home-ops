---
# yaml-language-server: $schema=https://json.schemastore.org/helmfile

helmDefaults:
  cleanupOnFail: true
  wait: true
  waitForJobs: true
  # waitRetries: 3 # Not supported by Helm yet

repositories:
- name: controlplaneio
  url: ghcr.io/controlplaneio-fluxcd/charts
  oci: true

- name: coredns
  url: ghcr.io/coredns/charts
  oci: true

- name: cilium
  url: https://helm.cilium.io

- name: jetstack
  url: https://charts.jetstack.io

- name: spegel
  url: ghcr.io/spegel-org/helm-charts
  oci: true

releases:
- name: flux-operator
  namespace: flux-system
  atomic: true
  chart: controlplaneio/flux-operator
  version: 0.18.0
  values: [ '/home/carpenam/GitProjects/home-ops/kubernetes/apps/flux-system/flux-operator/app/helm/values.yaml' ]

- name: flux-instance
  namespace: flux-system
  atomic: true
  chart: controlplaneio/flux-instance
  version: 0.18.0
  values: [ '/home/carpenam/GitProjects/home-ops/kubernetes/apps/flux-system/flux-instance/app/helm/values.yaml' ]
  needs: [ 'flux-system/flux-operator' ]
